#!/bin/bash

set -ex

DS_HOME="$HOME/work/devstronomy"
DS_FRONTEND="$DS_HOME/frontend"
DS_GITHUB_IO="$DS_HOME/devstronomy.github.io"
DS_CELESTIAL="$DS_HOME/celestial"

cd "$DS_FRONTEND"
rm -rvf build
npm run build

cd "$DS_GITHUB_IO"
ls | egrep -v "CNAME|README.md" | xargs rm -rv

cp -a "$DS_FRONTEND/build/"* "$DS_GITHUB_IO"
mkdir "$DS_GITHUB_IO/celestial"
cp -a "$DS_CELESTIAL/"{data,modules,index.html,styles.css} "$DS_GITHUB_IO/celestial"

set +x

cat << EOF

To deploy the build, do:
------------------------
cd $DS_GITHUB_IO
git add -A .
git commit
git push
EOF
